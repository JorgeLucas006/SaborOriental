<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sabor Oriental</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="../../assets/styles/global-styles.css">
</head>

<body>
  <main>
    <div class="container">
      <section class="register">
        <h1 class="title">Cadastre sua reserva aqui!</h1>
        <fieldset>
          <form action="">

            <div class="date-time">
              <div class="section-date">
                <label for="date">Data:<input type="date" id="date"></label>
                <span class="date-warning warning"></span>
              </div>
              <div class="section-time">
                <label for="time">Hora:<input type="time" id="time"></label>
                <span class="time-warning warning"></span>
              </div>
            </div>

            <label for="people">Pessoas:
              <select id="people">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
              </select>
            </label>

            <div class="name-email">
              <h2>Contato Principal</h2>
              <label for="name">Nome:<input type="text" id="name"></label>
              <span class="name-warning warning"></span>

              <label for="email">Email:<input type="email" id="email"></label>
              <span class="email-warning warning"></span>
            </div>

            <div class="buttons">
              <input type="button" value="Salvar" onclick="save()">
              <input type="reset" value="Cancelar">
            </div>
          </form>
        </fieldset>
      </section>
      <section class="logo">
        <img src="../../assets/images/logo-teste.jfif" alt="">
      </section>
    </div>
  </main>

  <div class="modal">
    <div class="modal-content">
      <h3>
        VocÃª foi registrado com sucesso!
      </h3>
      <p>
        Obrigado pela reserva no Sabor Oriental.
      </p>
      <div class="close-button">
        <input type="button" value="Ok" onclick="closeModal()">
      </div>
    </div>
  </div>
</body>
<script>
  function save() {
    const inputDate = document.querySelector('#date').value
    const inputTime = document.querySelector('#time').value
    const inputName = document.querySelector('#name').value
    const inputEmail = document.querySelector('#email').value
    const regex = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/gi
    const emailVerify = regex.test(inputEmail)
    let verify = true;

    let formatedDate = inputDate.split('-').reverse().join('/');

    if (!formatedDate) {
      const warningDate = document.querySelector('.date-warning')
      warningDate.innerHTML = "Data digitada Incorretamente!"
      verify = false
    }

    if (!inputTime) {
      const warningTime = document.querySelector('.time-warning')
      warningTime.innerHTML = "Hora digitada Incorretamente!"
      verify = false
    }

    if (!inputName) {
      const warningName = document.querySelector('.name-warning')
      warningName.innerHTML = "Nome digitada Incorretamente!"
      verify = false
    }

    if (!emailVerify) {
      const warningEmail = document.querySelector('.email-warning')
      warningEmail.innerHTML = "Email digitada Incorretamente!"
      verify = false
    }

    if (formatedDate && inputTime && inputName && emailVerify) {
      verify = true
    }

    if (verify) {
      const modal = document.querySelector('.modal')
      const warningRemove = document.querySelectorAll('.warning')
      for (var i = 0; i < warningRemove.length; i++) {
        warningRemove[i].innerHTML = "";
      }

      modal.style.visibility = 'visible';

    } else {
      return
    }
  }

  function closeModal() {
    const modal = document.querySelector('.modal')
    modal.style.visibility = 'hidden';
  }
</script>

</html>